<!DOCTYPE html>
<html lang="pt-PT">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca De ùíúùìãùëúùìÉùìÅùëíùí∂ </title>
    <!--Biblioteca Digital Interativa -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üìñ</text></svg>">
    <link rel="stylesheet" href="/src/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="/src/js/script2.js"></script>
</head>

<body>
    <header>
        <div class="container header-inner">
            <h1>Biblioteca De <span>ùíúùìãùëúùìÉùìÅùëíùí∂</span></h1>
            <nav aria-label="Se√ß√µes da biblioteca" class="nav">
                <button class="nav-btn" data-section="inicio" title="P√°gina inicial">üè† In√≠cio</button>
                <button class="nav-btn" data-section="livros">Livros</button>
                <button class="nav-btn" data-section="autores">Autores</button>
                <button class="nav-btn" data-section="categorias">Categorias</button>
                <button class="nav-btn" data-section="avaliacoes">Avalia√ß√µes</button>
                <button class="nav-btn" data-section="utilizadores">Utilizadores</button>
                <button class="nav-btn" data-section="emprestimos">Empr√©stimos</button>
                <button class="nav-btn" data-section="reservas">Reservas</button>
                <button title="Login" id="login" class="nav-btn login-btn" data-section="login-section"></button>
                <button id="logout-btn" class="submit-btn" onclick="sairLogin()">Sair</button>
            </nav>
        </div>
    </header>

    <main>

        <!-- Se√ß√£o de In√≠cio -->
        <section id="inicio" class="section visible">
            <h2>Bem-vindo √† Biblioteca De <span>ùíúùìãùëúùìÉùìÅùëíùí∂</span> üåø</h2>
            <p>Aqui, cada livro √© uma porta; cada autor, um universo √† espera de ser explorado. Entre, respire o aroma das p√°ginas e descubra o poder das hist√≥rias que esperam por si.</p>
        </section>

        <!-- INFO LIVRO -->
        <section id="infoLivro" class="section hidden" data-section="infoLivro">
            <div class="InformacaoLivro">
                <div class="capaLivro"></div>
                <div class="dadosLivro">
                    <table class="tabelaVertical" id="tabela-dadosLivro">
                        <tr><th>T√≠tulo:</th>     <td></td></tr>
                        <tr><th>Autor:</th>      <td></td></tr>
                        <tr><th>Categoria:</th>  <td></td></tr>
                        <tr><th>Ano:</th>        <td></td></tr>
                        <tr><th>Dispon√≠vel:</th> <td></td></tr>
                    </table>
                </div>
                <div class="soliLivro">
                    <button id="soliLivro" data-livro-id="${item.id_livro}">Solicitar Livro</button>
                </div>
                <p id="reservas-mensagem" style="color: rgb(30, 157, 5); display: none;">Livro reservado</p>
                <dialog id="meu-popup" class="popup" style="display: none;">
                    <h2>Livro indispon√≠vel</h2>
                    <p>Este livro n√£o est√° dispon√≠vel. Deseja reservar?</p>
                    <div class="dentroPopUp">
                        <button class="nav-btn" id="confirmar-reserva">Sim</button>
                        <button class="nav-btn" id="cancelar-reserva">N√£o</button>
                    </div>
                </dialog>
                <div class="mediaAvaliacao">
                    <span id="mediaAvaliacao">0.0</span>
                    <span id="estrelasAvaliacao"></span>
                </div>
            </div>
            <table id="tabela-avaliacao">
                <thead>
                    <tr>
                        <th>Utilizador</th>
                        <th>Coment√°rio</th>
                        <th>Classifica√ß√£o</th>
                        <th><button id="addAvaliacao">+</button></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Se√ß√£o para Livros -->
        <section id="livros" class="section">
            <h2 class="nomeSection">Livros</h2>
            <p id="livros-mensagem" style="color: red; display: none;"></p>
            <form id="form-livros" onsubmit="return false;">
                <input type="hidden" id="livro-id">
                <label>T√≠tulo: <input type="text" id="livro-titulo" required></label>
                <label>Autor: <select id="livro-autor_id" required></select></label>
                <label>Categoria: <select id="livro-categoria_id" required></select></label>
                <label>Ano: <input type="number" id="livro-ano" required></label>
                <div class="livroDisponivel"><label>Dispon√≠vel:<input type="checkbox" id="livro-disponivel"></label></div>
                <button class="submit-btn" onclick="adicionarOuAtualizar('livros')">Adicionar/Atualizar</button>
            </form>

            <!-- Tabela Admin (vis√£o completa) -->
            <table id="tabela-livros">
                <thead>
                    <tr>
                        <th>T√≠tulo</th>
                        <th>Autor</th>
                        <th>Categoria</th>
                        <th>Ano</th>
                        <th>Dispon√≠vel</th>
                        <th>M√©dia Avalia√ß√µes</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <div class="pesquisa">
    <i class="fas fa-search search-icon"></i>
    <input 
        type="text" 
        id="pesquisa-livros" 
        placeholder="Pesquisar por t√≠tulo ou autor..."
    >
</div>

                    <br><br>
                </tbody>
            </table>

            <table id="tabela-livros-user" style="display: none;">
                <thead>
                    <tr>
                        <th>T√≠tulo</th>
                        <th>Autor</th>
                        <th>Ano</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Se√ß√£o para Autores -->
        <section id="autores" class="section hidden">
            <h2>Autores</h2>
            <p id="mensagem-autores" style="color: red; display: none;"></p>
            <input type="text" id="pesquisa-autores" placeholder="Pesquisar autor...">

            <form id="form-autores" onsubmit="return false;">
                <input type="hidden" id="autor-id">
                <label>Nome: <input type="text" id="autor-nome" required></label>
                <label>Nacionalidade: <input type="text" id="autor-nacionalidade"></label>
                <label>Data Nascimento: <input type="date" id="autor-data_nascimento"></label>
                <button class="submit-btn" onclick="adicionarOuAtualizar('autores')">Adicionar/Atualizar</button>
            </form>

            <!-- Tabela Admin -->
            <table id="tabela-autores">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Nacionalidade</th>
                        <th>Data Nascimento</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Se√ß√£o para Categorias -->
        <section id="categorias" class="section hidden">
            <h2>Categorias</h2>
            <p id="categorias-mensagem" style="color: red; display: none;"></p>
            <form id="form-categorias" onsubmit="return false;">
                <input type="hidden" id="categoria-id">
                <label>Nome: <input type="text" id="categoria-nome" required></label>
                <label>Descri√ß√£o: <input type="text" id="categoria-descricao"></label>
                <button class="submit-btn" onclick="adicionarOuAtualizar('categorias')">Adicionar/Atualizar</button>
            </form>

            <!-- Tabela Admin -->
            <table id="tabela-categorias">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Descri√ß√£o</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Se√ß√£o para Utilizadores -->
        <section id="utilizadores" class="section hidden">
            <h2>Utilizadores</h2>
            <p id="mensagem-utilizadores" style="color: red; display: none;"></p>
            <form id="form-utilizadores" onsubmit="return false;">
                <input type="hidden" id="utilizador-id">
                <label>Nome: <input type="text" id="utilizador-nome" required></label>
                <label>Email: <input type="email" id="utilizador-email" required></label>
                <label>Tipo: <select id="utilizador-tipo">
                        <option value="aluno">Aluno</option>
                        <option value="professor">Professor</option>
                        <option value="outro">Outro</option>
                    </select></label>
                <button class="submit-btn" onclick="adicionarOuAtualizar('utilizadores')">Adicionar/Atualizar</button>
            </form>

            <!-- Tabela Admin -->
            <table id="tabela-utilizadores">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Tipo</th>
                        <th>Livros emprestados</th>
                        <th>Livros n√£o devolvidos</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Se√ß√£o para Empr√©stimos -->
        <section id="emprestimos" class="section hidden">
            <h2 class="nomeSection">Empr√©stimos</h2>
            <p id="emprestimos-mensagem" style="color: red; display: none;"></p>
            <form id="form-emprestimos" onsubmit="return false;">
                <input type="hidden" id="emprestimo-id">
                <label>Livro: <select id="emprestimo-livro_id" required></select></label>
                <label>Utilizador: <select id="emprestimo-utilizador_id" required></select></label>
                <label>Data Empr√©stimo: <input type="date" id="emprestimo-data_emprestimo" required></label>
                <label>Data Devolu√ß√£o: <input type="date" id="emprestimo-data_devolucao"></label>
                <button class="submit-btn" onclick="adicionarOuAtualizar('emprestimos')">Adicionar/Atualizar</button>
            </form>

            <!-- Tabela para Admin -->
                <table id="tabela-emprestimos-admin">
                    <thead>
                        <tr>
                            <th>Utilizador</th>
                            <th>Livro</th>
                            <th>Data Empr√©stimo</th>
                            <th>Data Devolu√ß√£o</th>
                            <th>Status</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <!-- Tabela para Utilizador comum -->
                <table id="tabela-emprestimos-user" style="display: none;">
                    <thead>
                        <tr>
                            <th>Livro</th>
                            <th>Data Devolu√ß√£o</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
        </section>

        
        <!-- Se√ß√£o para reservas -->
        <section id="reservas" class="section hidden">
            <h2 class="nomeSection">Reservas</h2>

            <!-- Tabela para Admin (completa) -->
            <table id="tabela-reservas-admin">
                <thead>
                    <tr>
                        <th>Utilizador</th>
                        <th>Livro</th>
                        <th>Autor</th>
                        <th>Data da Reserva</th>
                        <th>Status</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

            <!-- Tabela para Utilizador comum (simplificada) -->
            <table id="tabela-reservas-user" style="display: none;">
                <thead>
                    <tr>
                        <th>Livro</th>
                        <th>Autor</th>
                        <th>Data da Reserva</th>
                        <th>Status</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

        </section>

        <!-- Se√ß√£o para Avalia√ß√µes -->
        <section id="avaliacoes" class="section hidden">
            <h2 class="nomeSection">Avalia√ß√µes</h2>
            <p id="avaliacoes-mensagem" style="color: red; display: none;"></p>
            <form id="form-avaliacoes" onsubmit="return false;">
                <input type="hidden" id="avaliacao-id">
                <label>Livro: <select id="avaliacao-livro_id" required></select></label>
                <label>Utilizador: <select id="avaliacao-utilizador_id" required></select></label>
                <label>Coment√°rio: <textarea id="avaliacao-comentario"></textarea></label>
                <label>Classifica√ß√£o: <input type="number" id="avaliacao-classificacao" min="1" max="5" required></label>
                <button class="submit-btn" onclick="adicionarOuAtualizar('avaliacoes')">Adicionar/Atualizar</button>
            </form>

            <!-- Tabela Admin -->
            <table id="tabela-avaliacoes">
                <thead>
                    <tr>
                        <th>Livro</th>
                        <th>Utilizado</th>
                        <th>Coment√°rio</th>
                        <th>Media das classifica√ß√µes</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Se√ß√£o de Login -->
        <section id="login-section" class="section">
            <h2 class="nomeSection">Iniciar Sess√£o</h2>
            <form id="form-login" onsubmit="return false;">
                <label>Email:
                    <input type="email" id="login-email" placeholder="Insira o seu email" required>
                </label>
                <label>Password:
                    <input type="password" id="login-senha" placeholder="Insira a sua senha" required>
                </label>
                <button class="submit-btn" onclick="fazerLogin()">Entrar</button>
                <p data-section="sign-section" class="redirect">N√£o tem uma conta?</p>
            </form>
            <p id="login-erro" style="color: rgb(222, 32, 32); display: none;">Credenciais inv√°lidas. Tente novamente.</p>
        </section>

         <section id="sign-section" class="section">
            <h2 class="nomeSection">Criar Conta</h2>
            <form id="form-login" onsubmit="return false;">
                <label>Nome:
                    <input type="text" id="criar-nome" placeholder="Insira o seu email" required>
                </label>
                <label>Email:
                    <input type="email" id="criar-email" placeholder="Insira o seu email" required>
                </label>
                <label>Password:
                    <input type="password" id="criar-senha" placeholder="Insira a sua password" required>
                </label>
                <div class="tipo-utilizador">
                    <p class="label-tipo">Voc√™ √©?</p>
                    <div class="opcoes-tipo-imagem">
                        
                        <!-- Op√ß√£o Aluno -->
                        <label class="card-tipo">
                            <input type="radio" name="tipo-utilizador" value="aluno" required>
                            <div class="card-content">
                                <img src="https://www.svgrepo.com/show/352635/user-graduate.svg" alt="Aluno">
                                <span>Aluno</span>
                            </div>
                        </label>

                        <!-- Op√ß√£o Professor -->
                        <label class="card-tipo">
                            <input type="radio" name="tipo-utilizador" value="professor" required>
                            <div class="card-content">
                                <img src="https://cdn-icons-png.flaticon.com/512/90/90477.png" alt="Professor">
                                <span>Professor</span>
                            </div>
                        </label>

                    </div>
                </div>
                <button class="submit-btn" onclick="criarConta()">Criar Conta</button>
                <p data-section="login-section" class="redirect">J√° tem uma conta?</p>
            </form>
        </section>

    </main>

    <footer>
        &copy; 2025 Biblioteca de Avonlea. Todos os direitos reservados.
    </footer>
</body>

</html>